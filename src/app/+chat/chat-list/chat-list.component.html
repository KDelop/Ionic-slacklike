<!-- <div class="chat-skeleton-loader" *ngIf="!isLoaded">
  <ion-list>
    <ng-container *ngFor="let item of skeletonItem">
      <ion-item lines="none" *ngIf="!item.date">
        <ion-avatar slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-avatar>
        <ion-label>
          <p>
            <ion-skeleton-text [ngStyle]="{'width': item.line1+'%'}"></ion-skeleton-text>
          </p>
          <p *ngIf="item.line2">
            <ion-skeleton-text animated [ngStyle]="{'width': item.line2+'%'}"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-list-header class="my-4" *ngIf="item.date">
        <ion-skeleton-text animated style="width: 20%; margin: 0 auto" ></ion-skeleton-text>
      </ion-list-header>
    </ng-container>
  </ion-list>
</div> -->

<!-- <div *ngIf="isLoaded && (!groupedMessagesList || !objectKeys(groupedMessagesList) || !objectKeys(groupedMessagesList).length) " class="empty-state">
  <img class="image" src="./assets/img/empty-state.png" alt="">
  <h3>No chat found</h3>
  <p>lets start by sending a new message</p>
</div> -->
<div
          *ngFor="
            let message of chatList;
            let idx = index;
            trackBy: trackByFn
          "
          class="list-row d-flex flex-row tracks"
          [ngClass]="{
            'multiple-msg': !message.showAvatar,
            'new-tracks': message.isLeastUnreadTrack
          }"
          id="{{ message.isLeastUnreadTrack ? 'new-track' : '' }}"
        >
          <app-chat-preview
            class="w-100"
            [message]="message"
            [currentUser]="currentUser"
            [userEntities]="userEntities"
            [teamEntities]="teamEntities"
            [attachmentMessages]="attachmentMessages"
            [DMTeamEntities]="DMTeamEntities"
            [activeChat]="activeChat"
            [parentMessage]="
              message.showinMainConversation === 1 &&
              chatListEntities &&
              chatListEntities[message.threadId]
                ? chatListEntities[message.threadId]
                : null
            "
          >
          </app-chat-preview>
        </div>
<!-- <ng-container *ngIf="isLoaded">
  <ng-scrollbar
    #scrollbarRef
    [visibility]="'hover'"
    [autoHeightDisabled]="false"
    reachedOffset="200"
    (reachedTop)="loadMoreMessages()"
  >


  



    <ng-container
      *ngIf="
        groupedMessagesList && objectKeys(groupedMessagesList);
        let messageKey
      "
    >
      <ng-container *ngFor="let key of messageKey; let indx = index">
        <div class="msg-day-divider">
          <span class="time">{{ key }}</span>
          <div style="height: 1px; color: white"></div>
        </div>
        
        <div
          *ngFor="
            let message of groupedMessagesList[key];
            let idx = index;
            trackBy: trackByFn
          "
          class="list-row d-flex flex-row tracks"
          [ngClass]="{
            'multiple-msg': !message.showAvatar,
            'new-tracks': message.isLeastUnreadTrack
          }"
          id="{{ message.isLeastUnreadTrack ? 'new-track' : '' }}"
        >
          <app-chat-preview
            class="w-100"
            [message]="message"
            [currentUser]="currentUser"
            [userEntities]="userEntities"
            [teamEntities]="teamEntities"
            [attachmentMessages]="attachmentMessages"
            [DMTeamEntities]="DMTeamEntities"
            [activeChat]="activeChat"
            [parentMessage]="
              message.showInMainConversation === 1 &&
              chatListEntities &&
              chatListEntities[message.threadId]
                ? chatListEntities[message.threadId]
                : null
            "
          >
          </app-chat-preview>
        </div>
      </ng-container>
    </ng-container>
  </ng-scrollbar>

  <div *ngIf="isMessageRecieved" class="new-message" (click)="scrollToBottom()">
    New messages <i class="icon-arrow-down"></i>
  </div>
</ng-container> -->
